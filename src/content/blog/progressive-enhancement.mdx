---
title: 'progressively enhance your web applications'
description: 'make your web applications more resilient and accesible with
progressive enhancement.'
pubDate: 'sep 10 2023'
---

## what is progressive enhancement?

progressive enhancement is a web development technique that focuses on using the
**web platform**'s core features to build resilient and accessible web applications, and then *progressively enhance* the experience by adding feedback, animations, and other client-side features.

do you recall how the native `form` element works? when you submit a form, the browser will send a request to the server, and the server will respond with a new HTML page.

```html title="index.html" showLineNumbers
<form>
  <input type="email" name="email" />
  <input type="password" name="password" />
  <button type="submit">Login</button>
</form>
```

yes, the browser already knows how to send data to the server and render the new
page. if you are using any modern javascript framework, you might forgot **how
forms work**.

with modern javascript frameworks, sometimes we intercept the form submission,
prevent the browser's default behaviour, and use the `fetch` API to send the
form data to the server. then, we use the response to update the DOM using javascript.

```tsx showLineNumbers title="todos.tsx" /preventDefault()/ /onSubmit/ 
export default function Todos() {
  function handleCreateTodo(event) {
    event.preventDefault();

    const formData = new FormData(event.target);

    try {
      const res = await fetch('/api/todo', {
        method: 'POST',
        body: formData,
      });
      const data = await res.json();
      // Do something with the data
    } catch (error) {
      // Handle error
    }
  }

  return (
    <form onSubmit={handleCreateTodo}>
      <input type="text" name="title" />
      <button type="submit">Add Todo</button>
    </form>
  );
}
```

**we are not taking advantage of the web platform**. if the user doesn't have
javascript – and there are many reasons why they might not (*we'll get to that
later*) – then he would not be able to use our application.

if your website is a single-page application, and it is not being server-side rendered, that user will not be able to see the content of your website at all.

that's why *progressive enhancement* matters. the very basic functionality of your website **should be available** to everyone, regardless of their device, browser, or internet connection.

this users will not have the best experience, but at least they will be able to
*use your website*.

and then, using javascript, we can *enhance* the experience for the rest of the
users, providing them with a more interactive and engaging experience.

but why is this important? everyone has javascript, right?


## but everyone has javascript, right?

well, [not really](https://www.kryogenix.org/code/browser/everyonehasjs.html).
There are many reasons why a user might not have javascript.

- all your users are non-JS while they're downloading your JS.

- if your users are on a train and their net connection goes away before your
  javascript loads, then there's no javascript.

- some corporate firewalls block javascript.

- some ISPs or mobile operators interfere with javascript, and if you've never
  experienced this before, drive to an airport and use their WiFi.

- microbrowsers are everywhere, and they won't wait for your client app to boot up.

- some users have javascript disabled.

- there are thousands of browser extensions that might interfere with your
  javascript.

- your CDN might be down, making your whole app unusable.

- some users have a browser that doesn't support javascript.

- some users have a slow connection.


this concept of *progressive enhancement* it's actually how the web was meant to work, and you might be using it without even knowing it.


## you are already using progressive enhancement

if you are using any javascript framework like [next](https://nextjs.org/),
[remix](https://remix.run/) or [nuxt](https://nuxt.com/), you are already using *progressive enhancement*.

components like next's or remix's `<Link>` will work like a regular `<a>`
element while javascript is not loaded, and will be enhanced when javascript is
loaded.

- while there is no javascript, it works just like a regular link, triggering a full
page reload to show the new HTML page.

- but then, when javascript loads, this component will intercept the click event, fetch the new page, update the DOM, and change the URL without refreshing the page.

that is a great example of *progressive enhancement*. the **basic
functionality** is available to everyone, and then it is *enhanced* with
javascript. in this case, this *"enhancement"* is navigating without a page
refresh, preserving client state, prefetching, etc.

you might think this is a rare case, that only a few users will notice. is it really worth the effort?


## progressive enhancement and accessibility

we should think about *progressive enhancement* similarly to how we think about *accessibility*.

building products that provide **value** is the top priority, and if something doesn't, since it only affects a small percentage of users, spending time and effort on it is not worth it.
 
but what if we had libraries and tools that help us make our sites accessible without
much effort? why wouldn't we use them?

libraries like [radix UI](https://www.radix-ui.com/) or [headless
UI](https://headlessui.com/) help us build fully accessible web apps without the hassle.

```tsx showLineNumbers title="my-accessible-dropdown.tsx"
import * as DropdownMenu from "@radix-ui/react-dropdown-menu";

export default function MyAccessibleDropdown() {
  return (
    <DropdownMenu.Root>
      <DropdownMenu.Trigger>
        <Button variant="soft">
          Options
          <CaretDownIcon />
        </Button>
      </DropdownMenu.Trigger>
      <DropdownMenu.Content>
        <DropdownMenu.Item shortcut="⌘ E">Edit</DropdownMenu.Item>
        <DropdownMenu.Item shortcut="⌘ D">Duplicate</DropdownMenu.Item>
        <DropdownMenu.Separator />

        <DropdownMenu.Sub>
          <DropdownMenu.SubTrigger>More</DropdownMenu.SubTrigger>
          <DropdownMenu.SubContent>
            <DropdownMenu.Item>Move to project…</DropdownMenu.Item>
            <DropdownMenu.Item>Move to folder…</DropdownMenu.Item>
          </DropdownMenu.SubContent>
        </DropdownMenu.Sub>

        <DropdownMenu.Separator />
        <DropdownMenu.Item shortcut="⌘ ⌫" color="red">
          Delete
        </DropdownMenu.Item>
      </DropdownMenu.Content>
    </DropdownMenu.Root>
  )
}
```

this same concept can be translated to *progressive enhancement*. if a framework
gives us **good defaults**, and builds on top of the **web platform**, we can improve the resilience and availability of our applications, without having to change the way we develop.

let's see an example of how we can achieve this.


## a real world example

in this example i will be using [sveltekit](https://kit.svelte.dev/), but there
are lots of other frameworks that share similar patterns, like [remix](https://remix.run).

```svelte showLineNumbers title="todos.svelte" /create/
<form method="POST" action="?/create">
	<label>
    Title:
		<input
			name="title"
			autocomplete="off"
			required
		/>
	</label>
  <button type="submit">create todo</button>
</form>
```

this is just a regular form. when the user submits the form, the browser will
send a request to the server, and the server will respond with a new HTML page.

we have a server `action` that will handle the form submission. don't worry
about the details of this function, just note that it will create a new todo in
the database.

```ts showLineNumbers title="+page.server.ts" /create:/
import type { Actions } from './$types';

export const actions = {
  create: async ({ request }) => {
    const data = await request.formData();

    try {
      db.todos.create(data.get('title'));
    } catch (error) {
      return {
        status: 400,
        body: { error: error.message },
      };
    }
  }
} satisfies Actions;
```

our app works even if the user doesn't have javascript. That's great, because
it means our app is **resilient** and available to everyone.

now, we can *progressively enhance* the experience by adding some client-side
interactivity. In this case, we will use sveltekit's `use:enhance` directive,
which will emulate the browser-native behaviour, but without the full-page
reload. It will:

- update the `form` prop.

- invalidate all data on a successful response, causing `load` functions to
  re-run.

- navigate to the new page on a redirect response.

- render the nearest error page if an error occurs.

and we can add stuff like **pending states**, **animations**, and **optimistic
UI**.

```svelte showLineNumbers title="todos.svelte" {2,3,8,14-21,26,35-37}
<script lang="ts">
  import { fly, slide } from 'svelte/transition';
  import { enhance } from '$app/forms';
  import type { PageData } from './$types';

  export let data: PageData;

  let creating = false;
</script>

<form 
  method="POST"
  action="?/create"
  use:enhance={() => {
    creating = true;

    return async ({ update }) => {
      await update();
      creating = false;
    };
  }}
>
	<label>
    Title:
		<input
      disabled={creating}
			name="title"
			autocomplete="off"
			required
		/>
	</label>
  <button type="submit">create todo</button>
</form>

{#if creating}
  <p>creating todo...</p>
{/if}

<ul>
  {#each data.todos as todo (todo.id)}
    <li in:fly={{ y: 20 }} out:slide>
      {todo.title}
    </li>
  {/each}
</ul>
```

our app now is fully **interactive**, but it still works without javascript – it
is progressively enhanced –. and we didn't need to implement any complex logic
to make this work. we just used the web platform's core features, paired with a
nice framework that helps us build a resilient and accessible web application.

## conclusion

*progressive enhancement* is not a new concept, it's just how the web was
meant to work. we should take advantage of the web platform and build on top of it, with the help of frameworks and libraries that give us the right tools to do so.


## other resources

- [everyone has javascript, right?](https://www.kryogenix.org/code/browser/everyonehasjs.html)
- [progressive enhancement
MDN](https://developer.mozilla.org/en-US/docs/Glossary/Progressive_Enhancement)
- [sveltekit interactive
  tutorial](https://learn.svelte.dev/tutorial/progressive-enhancement)
- [remix progressive
  enhancement](https://remix.run/docs/en/main/pages/philosophy#progressive-enhancement)
